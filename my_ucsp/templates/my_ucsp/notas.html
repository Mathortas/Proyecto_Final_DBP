{% extends 'base.html' %}
{% load static %}

{% block title %}Notas – {{ curso.nombre }}{% endblock %}

{% block content %}
<div class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Notas de {{ curso.nombre }}</h2>
    <a href="{% url 'curso-detalle' curso.id_curso %}" class="btn btn-outline-primary">← Volver al curso</a>
  </div>

  {# —————— Sección: notas guardadas —————— #}
  {% for categoria, notas in notas_por_categoria %}
    <div class="card mb-3">
      <div class="card-header bg-secondary text-white">
        {{ categoria.nombre }}
      </div>
      <ul class="list-group list-group-flush">
        {% if notas %}
          {% for nota in notas %}
            <li class="list-group-item d-flex justify-content-between">
              <div>
                {% if nota.id_tarea %}
                  📝 {{ nota.id_tarea.nombre_tarea }}
                {% else %}
                  📊 {{ nota.nombre_nota }}
                {% endif %}
              </div>
              <div>
                Nota: {{ nota.nota_obtenida }} &nbsp;|&nbsp;
                Peso: {{ nota.peso_porcentaje }}%
              </div>
            </li>
          {% endfor %}
        {% else %}
          <li class="list-group-item text-muted">
            — Sin notas registradas —
          </li>
        {% endif %}
      </ul>
    </div>
  {% endfor %}

  {# —————— Sección: simulador (opcional) —————— #}
  <h3 class="mt-5">Simulación de Notas</h3>
  <div id="simulador-container">
    <!-- Aquí tu lógica JS para crear inputs dinámicos -->
  </div>
  <button class="btn btn-success mt-3" onclick="agregarNota()">Agregar Nota</button>
</div>

{# Tu script de simulador, si lo necesitas #}
<script>
  let notaId = 0;
  function agregarNota() {
    // … tu código existente …
  }
  function eliminarNota(id) {
    // … 
  }
  function toggleBloqueo(btn) {
    // …
  }
  document.addEventListener('DOMContentLoaded', () => {
    // opcionalmente, no añadir row por defecto
  });
</script>
{% endblock %}
