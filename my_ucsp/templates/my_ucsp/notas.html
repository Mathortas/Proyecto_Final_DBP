{% extends 'base.html' %}
{% load static %}

{% block title %}Notas â€“ {{ curso.nombre }}{% endblock %}

{% block content %}
<div class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Notas de {{ curso.nombre }}</h2>
    <a href="{% url 'curso-detalle' curso.id_curso %}" class="btn btn-outline-primary">â† Volver al curso</a>
  </div>

  {# â€”â€”â€”â€”â€”â€” SecciÃ³n: notas guardadas â€”â€”â€”â€”â€”â€” #}
  {% for categoria, notas in notas_por_categoria %}
    <div class="card mb-3">
      <div class="card-header bg-secondary text-white">
        {{ categoria.nombre }}
      </div>
      <ul class="list-group list-group-flush">
        {% if notas %}
          {% for nota in notas %}
            <li class="list-group-item d-flex justify-content-between">
              <div>
                {% if nota.id_tarea %}
                  ğŸ“ {{ nota.id_tarea.nombre_tarea }}
                {% else %}
                  ğŸ“Š {{ nota.nombre_nota }}
                {% endif %}
              </div>
              <div>
                Nota: {{ nota.nota_obtenida }} &nbsp;|&nbsp;
                Peso: {{ nota.peso_porcentaje }}%
              </div>
            </li>
          {% endfor %}
        {% else %}
          <li class="list-group-item text-muted">
            â€” Sin notas registradas â€”
          </li>
        {% endif %}
      </ul>
    </div>
  {% endfor %}

  {# â€”â€”â€”â€”â€”â€” SecciÃ³n: simulador (opcional) â€”â€”â€”â€”â€”â€” #}
  <h3 class="mt-5">SimulaciÃ³n de Notas</h3>
  <div id="simulador-container">
    <!-- AquÃ­ tu lÃ³gica JS para crear inputs dinÃ¡micos -->
  </div>
  <button class="btn btn-success mt-3" onclick="agregarNota()">Agregar Nota</button>
</div>

{# Tu script de simulador, si lo necesitas #}
<script>
  let notaId = 0;
  function agregarNota() {
    // â€¦ tu cÃ³digo existente â€¦
  }
  function eliminarNota(id) {
    // â€¦ 
  }
  function toggleBloqueo(btn) {
    // â€¦
  }
  document.addEventListener('DOMContentLoaded', () => {
    // opcionalmente, no aÃ±adir row por defecto
  });
</script>
{% endblock %}
